(function(_0x11713c,_0x23b505){const _0x52aa1c=a0_0xa862,_0x42e081=_0x11713c();while(!![]){try{const _0x18fb5e=-parseInt(_0x52aa1c(0x207))/0x1+-parseInt(_0x52aa1c(0x240))/0x2*(parseInt(_0x52aa1c(0x208))/0x3)+-parseInt(_0x52aa1c(0x237))/0x4+parseInt(_0x52aa1c(0x206))/0x5+-parseInt(_0x52aa1c(0x227))/0x6+-parseInt(_0x52aa1c(0x23f))/0x7+parseInt(_0x52aa1c(0x22c))/0x8;if(_0x18fb5e===_0x23b505)break;else _0x42e081['push'](_0x42e081['shift']());}catch(_0x162fd0){_0x42e081['push'](_0x42e081['shift']());}}}(a0_0x2799,0xaafbb));import a0_0x1d891c from'./alerts.js';import{backendAddress}from'./main.js';function a0_0x2799(){const _0x87d6c=['local','remove','set','RUsDp','29251408PQuDpb','UROWR','fUjAS','bkqJR','Error\x20updating\x20blacklist:','tableBody','scope','Error\x20saving\x20blacklist\x20to\x20storage','runtime','storage','value','189532aklCUY','QrycA','lastError','button','taXkw','blacklist','UkOWk','status','3734045NBUAKy','524tcKCde','NTomr','forEach','deleteRow','appendChild','Storage\x20Error','vNVIW','getElementById','XAeSA','Could\x20not\x20add\x20entry\x20to\x20database','/api/updateblacklist','VjDPz','add','XeBGo','TviGa','createElement','POST','error','bFJER','application/json','Error\x20retrieving\x20blacklist\x20data\x20from\x20storage','personal','eTzpZ','6270970ZTxxCt','1297449MJfooK','15054ZfsqwV','removeChild','length','sort','values','manager','SeqFD','disabled','uMIwS','KXSzb','Error','addBlacklistItemScopeInput','MoAuM','wFfBs','PlCRt','SeqxN','addEventListener','AqFkc','json','TYiiy','pmSPg','Error\x20in\x20updateBlacklistInStorage:','oPxGs','className','type','pJoqS','RyBPH','BUuRL','rows','createTextNode','delete-table-row-button','6103740nqVqzw'];a0_0x2799=function(){return _0x87d6c;};return a0_0x2799();}import{getEmail,getCompanyName,getLoginKey,getAccountType}from'./state.js';export function populateBlacklistTable(_0x5873ed){const _0x5a49e1=a0_0xa862,_0x30d851={'vNVIW':_0x5a49e1(0x204),'afByE':function(_0x55b0e3,_0x2fa93a){return _0x55b0e3!==_0x2fa93a;},'RyBPH':function(_0x35a66e,_0x48e756){return _0x35a66e!==_0x48e756;},'KXSzb':function(_0x238d4a,_0x13b3e7){return _0x238d4a===_0x13b3e7;},'SeqFD':function(_0x3b94b5,_0x1651c7,_0x3fdec1,_0x3a8fac){return _0x3b94b5(_0x1651c7,_0x3fdec1,_0x3a8fac);},'BUuRL':function(_0x26be66,_0x3a6d2a){return _0x26be66>_0x3a6d2a;}},_0x3a899c=document['getElementById'](_0x5a49e1(0x231));while(_0x30d851[_0x5a49e1(0x223)](_0x3a899c[_0x5a49e1(0x224)][_0x5a49e1(0x20a)],0x1)){_0x3a899c[_0x5a49e1(0x243)](0x1);}Array['isArray'](_0x5873ed)?(_0x5873ed[_0x5a49e1(0x20b)]((_0x2d5182,_0x17ea14)=>{const _0x1b7979=_0x5a49e1;if(_0x2d5182[_0x1b7979(0x232)]===_0x30d851['vNVIW']&&_0x30d851['afByE'](_0x17ea14[_0x1b7979(0x232)],_0x30d851[_0x1b7979(0x1f5)]))return-0x1;if(_0x30d851[_0x1b7979(0x222)](_0x2d5182['scope'],_0x1b7979(0x204))&&_0x30d851[_0x1b7979(0x211)](_0x17ea14['scope'],'personal'))return 0x1;return 0x0;}),_0x5873ed[_0x5a49e1(0x242)]((_0x50115a,_0x2d5ee7)=>{const _0x3a3c15=_0x5a49e1;_0x30d851[_0x3a3c15(0x20e)](addRowToTable,_0x3a899c,_0x50115a,_0x2d5ee7);})):addRowToTable(_0x3a899c,_0x5873ed,0x0);}export function loadBlacklist(){const _0x154ce4=a0_0xa862,_0x3c1f11={'wFfBs':_0x154ce4(0x1f4),'fUjAS':function(_0x235717,_0xb9030d){return _0x235717(_0xb9030d);},'pmSPg':function(_0x598dd5,_0x13c2d4){return _0x598dd5!==_0x13c2d4;},'UwqpM':'manager','gAhjz':_0x154ce4(0x213),'RUsDp':'blacklist','TviGa':'Error\x20in\x20loadBlacklist:','eTzpZ':'Error\x20loading\x20blacklist','taXkw':_0x154ce4(0x212)},_0x1316fb=getAccountType();_0x3c1f11[_0x154ce4(0x21c)](_0x1316fb,_0x3c1f11['UwqpM'])&&(document[_0x154ce4(0x1f6)](_0x3c1f11['gAhjz'])[_0x154ce4(0x20f)]=!![]);try{chrome[_0x154ce4(0x235)]['local']['get'](_0x3c1f11[_0x154ce4(0x22b)],_0x40516c=>{const _0x44d532=_0x154ce4;if(chrome[_0x44d532(0x234)][_0x44d532(0x239)]){a0_0x1d891c['error'](_0x44d532(0x203),_0x3c1f11[_0x44d532(0x215)]);return;}const _0x36a102=_0x40516c[_0x44d532(0x23c)]||{},_0x3d99df=Object[_0x44d532(0x20c)](_0x36a102);_0x3c1f11[_0x44d532(0x22e)](populateBlacklistTable,_0x3d99df);});}catch(_0x9c67c4){console['error'](_0x3c1f11[_0x154ce4(0x1fd)],_0x9c67c4),a0_0x1d891c['error'](_0x3c1f11[_0x154ce4(0x205)],_0x3c1f11[_0x154ce4(0x23b)]);}}export async function removeBlacklistEntry(_0x5d6755,_0xf325d2,_0x3c7191){const _0x341025=a0_0xa862,_0x1aca28={'XAeSA':_0x341025(0x229),'AqFkc':function(_0x4c58fd,_0x5b5f72){return _0x4c58fd===_0x5b5f72;},'fwrcz':_0x341025(0x212),'XGJdy':function(_0x166e2c,_0x34f16c){return _0x166e2c(_0x34f16c);}},_0x5b3042={'type':_0x5d6755,'value':_0xf325d2,'scope':_0x3c7191},_0x29b71d=await updateBlacklistInDatabase(_0x5b3042,_0x1aca28[_0x341025(0x1f7)]);if(!_0x29b71d||_0x1aca28[_0x341025(0x219)](_0x29b71d[_0x341025(0x20a)],0x0))return a0_0x1d891c[_0x341025(0x200)]('Could\x20not\x20remove\x20entry\x20from\x20database',_0x1aca28['fwrcz']),![];return _0x1aca28['XGJdy'](updateBlacklistInStorage,_0x29b71d),!![];}export async function updateBlacklistInDatabase(_0x33e57c,_0x1943ae){const _0x1d5021=a0_0xa862,_0x5bd3d6={'fHpfJ':function(_0x131e05){return _0x131e05();},'oKtVV':function(_0x9c6fa2){return _0x9c6fa2();},'VjDPz':function(_0x5d6848,_0x33771f,_0x4fe448){return _0x5d6848(_0x33771f,_0x4fe448);},'UkOWk':_0x1d5021(0x202),'UROWR':_0x1d5021(0x230)};try{const _0x8a1392=_0x5bd3d6['fHpfJ'](getEmail),_0x56bc0a=_0x5bd3d6['oKtVV'](getCompanyName),_0x2362c6=getLoginKey(),_0x2af08c=backendAddress+_0x1d5021(0x1f9),_0x5918a8={'companyName':_0x56bc0a,'email':_0x8a1392,'loginKey':_0x2362c6,'type':_0x33e57c[_0x1d5021(0x220)],'value':_0x33e57c['value'],'scope':_0x33e57c['scope'],'action':_0x1943ae},_0x2c3824=await _0x5bd3d6[_0x1d5021(0x1fa)](fetch,_0x2af08c,{'method':_0x1d5021(0x1ff),'headers':{'Content-Type':_0x5bd3d6[_0x1d5021(0x23d)]},'body':JSON['stringify'](_0x5918a8)});if(!_0x2c3824['ok']){const _0x1615c8='Server\x20responded\x20with\x20status\x20'+_0x2c3824[_0x1d5021(0x23e)];throw new Error(_0x1615c8);}const _0x23628d=await _0x2c3824[_0x1d5021(0x21a)]();return _0x23628d[_0x1d5021(0x23c)];}catch(_0x313ef0){return console['error'](_0x5bd3d6[_0x1d5021(0x22d)],_0x313ef0),a0_0x1d891c['error']('Error\x20updating\x20item\x20in\x20blacklist','Error'),[];}}export function updateBlacklistInStorage(_0x1c0529){const _0x57121d=a0_0xa862,_0x2c73a3={'PlCRt':_0x57121d(0x233),'SeqxN':_0x57121d(0x1f4),'acXAA':_0x57121d(0x21d)};try{chrome[_0x57121d(0x235)][_0x57121d(0x228)][_0x57121d(0x22a)]({'blacklist':_0x1c0529},function(){const _0x186e4f=_0x57121d;chrome[_0x186e4f(0x234)][_0x186e4f(0x239)]&&a0_0x1d891c[_0x186e4f(0x200)](_0x2c73a3[_0x186e4f(0x216)],_0x2c73a3[_0x186e4f(0x217)]);});}catch(_0x5e8f69){console['error'](_0x2c73a3['acXAA'],_0x5e8f69),a0_0x1d891c['error']('Error\x20updating\x20storage',_0x2c73a3['SeqxN']);}}function a0_0xa862(_0x378f0a,_0x257780){const _0x279902=a0_0x2799();return a0_0xa862=function(_0xa86227,_0x390e05){_0xa86227=_0xa86227-0x1f3;let _0x10c607=_0x279902[_0xa86227];return _0x10c607;},a0_0xa862(_0x378f0a,_0x257780);}export function addRowToTable(_0x32e659,_0x46c1f1,_0x119288){const _0x4601cf=a0_0xa862,_0x25a124={'QiBBy':function(_0x72daca,_0xe5ecab,_0xb96f7,_0x4a0a21){return _0x72daca(_0xe5ecab,_0xb96f7,_0x4a0a21);},'pJoqS':function(_0x591f10,_0x5dc52f){return _0x591f10+_0x5dc52f;},'uMIwS':function(_0x2f554a){return _0x2f554a();},'XeBGo':function(_0x425230,_0x447e6f){return _0x425230===_0x447e6f;},'bkqJR':_0x4601cf(0x20d),'NTomr':'company','oPxGs':_0x4601cf(0x226),'MoAuM':'click'},_0x5636d8=_0x25a124[_0x4601cf(0x221)](_0x119288,0x1),_0x2e5275=document[_0x4601cf(0x1fe)]('tr'),_0xcbb9b={'numbering':_0x5636d8,..._0x46c1f1},_0x1d6da5=document[_0x4601cf(0x1fe)]('td');_0x1d6da5[_0x4601cf(0x1f3)](document[_0x4601cf(0x225)](_0x5636d8)),_0x2e5275['appendChild'](_0x1d6da5);const _0x9ebc89=document[_0x4601cf(0x1fe)]('td');_0x9ebc89[_0x4601cf(0x1f3)](document[_0x4601cf(0x225)](_0xcbb9b['type'])),_0x2e5275['appendChild'](_0x9ebc89);const _0x4804a5=document[_0x4601cf(0x1fe)]('td');_0x4804a5[_0x4601cf(0x1f3)](document[_0x4601cf(0x225)](_0xcbb9b[_0x4601cf(0x236)])),_0x2e5275[_0x4601cf(0x1f3)](_0x4804a5);const _0x53cee2=document[_0x4601cf(0x1fe)]('td');_0x53cee2[_0x4601cf(0x1f3)](document[_0x4601cf(0x225)](_0xcbb9b['scope'])),_0x2e5275['appendChild'](_0x53cee2);const _0x665d5b=document['createElement']('td'),_0x31355a=_0x25a124[_0x4601cf(0x210)](getAccountType);if(_0x25a124[_0x4601cf(0x1fc)](_0x31355a,_0x25a124[_0x4601cf(0x22f)])||_0xcbb9b[_0x4601cf(0x232)]!==_0x25a124[_0x4601cf(0x241)]){const _0x5de64a=document['createElement'](_0x4601cf(0x23a));_0x5de64a[_0x4601cf(0x21f)]=_0x25a124[_0x4601cf(0x21e)],_0x5de64a[_0x4601cf(0x218)](_0x25a124[_0x4601cf(0x214)],async function(){const _0x1f0c1e=_0x4601cf,_0x5c8044=await _0x25a124['QiBBy'](removeBlacklistEntry,_0xcbb9b['type'],_0xcbb9b[_0x1f0c1e(0x236)],_0xcbb9b['scope']);_0x5c8044&&_0x32e659[_0x1f0c1e(0x209)](_0x2e5275);}),_0x665d5b[_0x4601cf(0x1f3)](_0x5de64a);}_0x2e5275[_0x4601cf(0x1f3)](_0x665d5b),_0x32e659[_0x4601cf(0x1f3)](_0x2e5275);}export async function addBlacklistEntry(_0x493b5e,_0x2d7537,_0x5dc4a2){const _0x3ae77b=a0_0xa862,_0x5bb342={'bFJER':function(_0x37ca22,_0x45c067,_0x15d4f4){return _0x37ca22(_0x45c067,_0x15d4f4);},'TYiiy':_0x3ae77b(0x1fb),'xjrup':_0x3ae77b(0x1f8),'QuHiY':_0x3ae77b(0x231),'QrycA':function(_0x2612db,_0x42389f,_0x4040fc,_0x2e62c4){return _0x2612db(_0x42389f,_0x4040fc,_0x2e62c4);}},_0x5e7877={'type':_0x493b5e,'value':_0x2d7537,'scope':_0x5dc4a2},_0x3cf4f9=await _0x5bb342[_0x3ae77b(0x201)](updateBlacklistInDatabase,_0x5e7877,_0x5bb342[_0x3ae77b(0x21b)]);if(!_0x3cf4f9||_0x3cf4f9['length']===0x0){a0_0x1d891c[_0x3ae77b(0x200)](_0x5bb342['xjrup'],_0x3ae77b(0x212));return;}updateBlacklistInStorage(_0x3cf4f9);const _0x3f7dd1=document[_0x3ae77b(0x1f6)](_0x5bb342['QuHiY']),_0xf50f71=_0x3f7dd1[_0x3ae77b(0x224)][_0x3ae77b(0x20a)]-0x1;_0x5bb342[_0x3ae77b(0x238)](addRowToTable,_0x3f7dd1,_0x5e7877,_0xf50f71);}