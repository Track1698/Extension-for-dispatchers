(function(_0x47266d,_0x211876){const _0x1dc808=a0_0x4146,_0x23b27e=_0x47266d();while(!![]){try{const _0x1ec114=parseInt(_0x1dc808(0x1cd))/0x1*(-parseInt(_0x1dc808(0x1c7))/0x2)+-parseInt(_0x1dc808(0x190))/0x3*(-parseInt(_0x1dc808(0x1e3))/0x4)+-parseInt(_0x1dc808(0x1cb))/0x5+parseInt(_0x1dc808(0x1a7))/0x6+parseInt(_0x1dc808(0x1ba))/0x7+-parseInt(_0x1dc808(0x1ac))/0x8+parseInt(_0x1dc808(0x1c4))/0x9*(-parseInt(_0x1dc808(0x193))/0xa);if(_0x1ec114===_0x211876)break;else _0x23b27e['push'](_0x23b27e['shift']());}catch(_0x4e2851){_0x23b27e['push'](_0x23b27e['shift']());}}}(a0_0x4c0a,0x9f0eb));import a0_0x1b32ff from'./alerts.js';import{backendAddress}from'./main.js';import{getEmail,getCompanyName,getLoginKey,getAccountType}from'./state.js';export function populateBlacklistTable(_0x4b487b){const _0x3cb884=a0_0x4146,_0x14407f={'qcoEm':function(_0x574525,_0x349f7e){return _0x574525===_0x349f7e;},'Wtsoa':_0x3cb884(0x1c6),'OqoAy':function(_0xcdf4cd,_0x29990a){return _0xcdf4cd!==_0x29990a;},'fsENU':function(_0x4f7934,_0x2969b6,_0x145578,_0x126503){return _0x4f7934(_0x2969b6,_0x145578,_0x126503);}},_0x598b31=document['getElementById'](_0x3cb884(0x192));while(_0x598b31[_0x3cb884(0x19e)][_0x3cb884(0x1d6)]>0x1){_0x598b31[_0x3cb884(0x1bb)](0x1);}Array[_0x3cb884(0x18f)](_0x4b487b)?(_0x4b487b[_0x3cb884(0x1af)]((_0x39b418,_0x331d7c)=>{const _0xe01df2=_0x3cb884;if(_0x14407f[_0xe01df2(0x1d2)](_0x39b418[_0xe01df2(0x1d5)],_0x14407f[_0xe01df2(0x1c3)])&&_0x14407f[_0xe01df2(0x198)](_0x331d7c['scope'],_0x14407f['Wtsoa']))return-0x1;if(_0x14407f[_0xe01df2(0x198)](_0x39b418['scope'],_0x14407f[_0xe01df2(0x1c3)])&&_0x14407f[_0xe01df2(0x1d2)](_0x331d7c[_0xe01df2(0x1d5)],_0x14407f[_0xe01df2(0x1c3)]))return 0x1;return 0x0;}),_0x4b487b[_0x3cb884(0x1d7)]((_0x158dde,_0x3f1bb6)=>{const _0xc24774=_0x3cb884;_0x14407f[_0xc24774(0x1b3)](addRowToTable,_0x598b31,_0x158dde,_0x3f1bb6);})):addRowToTable(_0x598b31,_0x4b487b,0x0);}export function loadBlacklist(){const _0x54284b=a0_0x4146,_0x2cd947={'OvWVO':_0x54284b(0x1e0),'NhvcL':function(_0x162537,_0x471ad8){return _0x162537(_0x471ad8);},'MqGhH':function(_0x161f37){return _0x161f37();},'mLtZw':_0x54284b(0x1a6),'yzYhq':'blacklist','qXDvU':_0x54284b(0x1c9)},_0x45a05d=_0x2cd947[_0x54284b(0x19f)](getAccountType);_0x45a05d!=='manager'&&(document[_0x54284b(0x1c5)](_0x2cd947[_0x54284b(0x196)])[_0x54284b(0x1be)]=!![]);try{chrome[_0x54284b(0x19a)][_0x54284b(0x19c)][_0x54284b(0x1a8)](_0x2cd947['yzYhq'],_0x599ffb=>{const _0x34df5d=_0x54284b;if(chrome[_0x34df5d(0x18e)][_0x34df5d(0x1ae)]){a0_0x1b32ff[_0x34df5d(0x1ce)](_0x2cd947[_0x34df5d(0x1a4)],'Storage\x20Error');return;}const _0x5d9aca=_0x599ffb[_0x34df5d(0x1ca)]||{},_0x5f0b18=Object[_0x34df5d(0x1ab)](_0x5d9aca);_0x2cd947['NhvcL'](populateBlacklistTable,_0x5f0b18);});}catch(_0x2afad7){console[_0x54284b(0x1ce)](_0x54284b(0x1da),_0x2afad7),a0_0x1b32ff[_0x54284b(0x1ce)](_0x2cd947[_0x54284b(0x1a1)],_0x54284b(0x1d1));}}export async function removeBlacklistEntry(_0x10b558,_0x41808e,_0x45327d){const _0x287fdd=a0_0x4146,_0x36e318={'Kcxjj':function(_0x1c2796,_0x3ccbb5,_0x56a184){return _0x1c2796(_0x3ccbb5,_0x56a184);},'cTNwc':_0x287fdd(0x18b),'dSLVO':function(_0x368783,_0x55ce81){return _0x368783===_0x55ce81;},'xOMMK':_0x287fdd(0x1d1),'mDclf':function(_0x307c2d,_0x3b0ca8){return _0x307c2d(_0x3b0ca8);}},_0x2a0c3a={'type':_0x10b558,'value':_0x41808e,'scope':_0x45327d},_0x41b744=await _0x36e318[_0x287fdd(0x1a2)](updateBlacklistInDatabase,_0x2a0c3a,_0x36e318[_0x287fdd(0x1ad)]);if(!_0x41b744||_0x36e318[_0x287fdd(0x1db)](_0x41b744[_0x287fdd(0x1d6)],0x0))return a0_0x1b32ff[_0x287fdd(0x1ce)](_0x287fdd(0x1b9),_0x36e318[_0x287fdd(0x18d)]),![];return _0x36e318['mDclf'](updateBlacklistInStorage,_0x41b744),!![];}function a0_0x4146(_0x4c4580,_0x19f9dd){const _0x4c0a3f=a0_0x4c0a();return a0_0x4146=function(_0x41465c,_0x24e428){_0x41465c=_0x41465c-0x18b;let _0x351bf1=_0x4c0a3f[_0x41465c];return _0x351bf1;},a0_0x4146(_0x4c4580,_0x19f9dd);}export async function updateBlacklistInDatabase(_0x149427,_0x13b5f2){const _0x5cc36c=a0_0x4146,_0x5c268d={'ZqBzy':function(_0x2a4f5e){return _0x2a4f5e();},'VRnli':function(_0x367e2a){return _0x367e2a();},'DqrZw':_0x5cc36c(0x1d3),'aKqVN':_0x5cc36c(0x1b8),'IbIDt':'Error'};try{const _0x53de7b=_0x5c268d[_0x5cc36c(0x1dd)](getEmail),_0x277228=_0x5c268d[_0x5cc36c(0x1c2)](getCompanyName),_0x39ec7a=getLoginKey(),_0x5d6b6c=backendAddress+_0x5cc36c(0x1cf),_0x2a0eaa={'companyName':_0x277228,'email':_0x53de7b,'loginKey':_0x39ec7a,'type':_0x149427[_0x5cc36c(0x1bd)],'value':_0x149427['value'],'scope':_0x149427[_0x5cc36c(0x1d5)],'action':_0x13b5f2},_0x7a893d=await fetch(_0x5d6b6c,{'method':_0x5cc36c(0x1a5),'headers':{'Content-Type':_0x5c268d[_0x5cc36c(0x1c0)]},'body':JSON['stringify'](_0x2a0eaa)});if(!_0x7a893d['ok']){const _0x52bcbe=_0x5cc36c(0x1d4)+_0x7a893d['status'];throw new Error(_0x52bcbe);}const _0x46257f=await _0x7a893d[_0x5cc36c(0x1a0)]();return _0x46257f['blacklist'];}catch(_0x1c3361){return console[_0x5cc36c(0x1ce)](_0x5cc36c(0x1cc),_0x1c3361),a0_0x1b32ff[_0x5cc36c(0x1ce)](_0x5c268d[_0x5cc36c(0x1a9)],_0x5c268d['IbIDt']),[];}}export function updateBlacklistInStorage(_0x5e7319){const _0x1119e8=a0_0x4146,_0x62c50f={'HrRNW':_0x1119e8(0x1d8),'BXgCs':_0x1119e8(0x191)};try{chrome['storage']['local'][_0x1119e8(0x1d9)]({'blacklist':_0x5e7319},function(){const _0xf8124d=_0x1119e8;chrome[_0xf8124d(0x18e)][_0xf8124d(0x1ae)]&&a0_0x1b32ff[_0xf8124d(0x1ce)](_0x62c50f[_0xf8124d(0x1b7)],_0x62c50f[_0xf8124d(0x1b1)]);});}catch(_0x9ecd9d){console[_0x1119e8(0x1ce)](_0x1119e8(0x1b4),_0x9ecd9d),a0_0x1b32ff['error'](_0x1119e8(0x1bc),_0x1119e8(0x191));}}export function addRowToTable(_0x26ad96,_0x50611c,_0x1d1a5b){const _0x2b7c1d=a0_0x4146,_0x3a7782={'sXFAa':function(_0x3d1e71,_0x5255a8,_0x4045fc,_0x14e70d){return _0x3d1e71(_0x5255a8,_0x4045fc,_0x14e70d);},'rfuBp':function(_0x1779aa){return _0x1779aa();},'zpveK':_0x2b7c1d(0x19b),'pMZqP':_0x2b7c1d(0x1dc),'wZVaG':'delete-table-row-button'},_0x22fb6a=_0x1d1a5b+0x1,_0x4ae217=document[_0x2b7c1d(0x1c1)]('tr'),_0x3856d8={'numbering':_0x22fb6a,..._0x50611c},_0x2d04fe=document[_0x2b7c1d(0x1c1)]('td');_0x2d04fe[_0x2b7c1d(0x199)](document['createTextNode'](_0x22fb6a)),_0x4ae217['appendChild'](_0x2d04fe);const _0x9ae3bb=document[_0x2b7c1d(0x1c1)]('td');_0x9ae3bb[_0x2b7c1d(0x199)](document['createTextNode'](_0x3856d8[_0x2b7c1d(0x1bd)])),_0x4ae217[_0x2b7c1d(0x199)](_0x9ae3bb);const _0x3186d7=document[_0x2b7c1d(0x1c1)]('td');_0x3186d7['appendChild'](document[_0x2b7c1d(0x18c)](_0x3856d8[_0x2b7c1d(0x1b0)])),_0x4ae217[_0x2b7c1d(0x199)](_0x3186d7);const _0x34decf=document['createElement']('td');_0x34decf['appendChild'](document[_0x2b7c1d(0x18c)](_0x3856d8[_0x2b7c1d(0x1d5)])),_0x4ae217[_0x2b7c1d(0x199)](_0x34decf);const _0x4050ee=document['createElement']('td'),_0x148299=_0x3a7782[_0x2b7c1d(0x1bf)](getAccountType);if(_0x148299===_0x3a7782[_0x2b7c1d(0x197)]||_0x3856d8[_0x2b7c1d(0x1d5)]!=='company'){const _0x469499=document[_0x2b7c1d(0x1c1)](_0x3a7782[_0x2b7c1d(0x1c8)]);_0x469499[_0x2b7c1d(0x19d)]=_0x3a7782[_0x2b7c1d(0x1e1)],_0x469499[_0x2b7c1d(0x1df)](_0x2b7c1d(0x195),async function(){const _0x15d1fc=_0x2b7c1d,_0x475565=await _0x3a7782[_0x15d1fc(0x1e2)](removeBlacklistEntry,_0x3856d8[_0x15d1fc(0x1bd)],_0x3856d8[_0x15d1fc(0x1b0)],_0x3856d8[_0x15d1fc(0x1d5)]);_0x475565&&_0x26ad96[_0x15d1fc(0x1b6)](_0x4ae217);}),_0x4050ee['appendChild'](_0x469499);}_0x4ae217[_0x2b7c1d(0x199)](_0x4050ee),_0x26ad96[_0x2b7c1d(0x199)](_0x4ae217);}export async function addBlacklistEntry(_0x39c959,_0x35ebac,_0x451f4e){const _0x453dd2=a0_0x4146,_0x171319={'sFqJM':function(_0x1764aa,_0xea067c,_0x2d0cc6){return _0x1764aa(_0xea067c,_0x2d0cc6);},'yStsG':_0x453dd2(0x194),'NvVWt':function(_0x1f7ffa,_0x46ca23){return _0x1f7ffa===_0x46ca23;},'KwyxO':_0x453dd2(0x1b5),'HjSSZ':_0x453dd2(0x1d1),'pkfEh':function(_0x575cb2,_0x2af711,_0x5db355,_0x418b84){return _0x575cb2(_0x2af711,_0x5db355,_0x418b84);}},_0x38d6f1={'type':_0x39c959,'value':_0x35ebac,'scope':_0x451f4e},_0x1cd390=await _0x171319['sFqJM'](updateBlacklistInDatabase,_0x38d6f1,_0x171319[_0x453dd2(0x1b2)]);if(!_0x1cd390||_0x171319[_0x453dd2(0x1de)](_0x1cd390['length'],0x0)){a0_0x1b32ff[_0x453dd2(0x1ce)](_0x171319[_0x453dd2(0x1aa)],_0x171319[_0x453dd2(0x1a3)]);return;}updateBlacklistInStorage(_0x1cd390);const _0xe22165=document[_0x453dd2(0x1c5)](_0x453dd2(0x192)),_0x4fd61a=_0xe22165['rows'][_0x453dd2(0x1d6)]-0x1;_0x171319[_0x453dd2(0x1d0)](addRowToTable,_0xe22165,_0x38d6f1,_0x4fd61a);}function a0_0x4c0a(){const _0x4a6bf7=['zpveK','OqoAy','appendChild','storage','manager','local','className','rows','MqGhH','json','qXDvU','Kcxjj','HjSSZ','OvWVO','POST','addBlacklistItemScopeInput','5605266yuRMtq','get','aKqVN','KwyxO','values','6958800OScIiA','cTNwc','lastError','sort','value','BXgCs','yStsG','fsENU','Error\x20in\x20updateBlacklistInStorage:','Could\x20not\x20add\x20entry\x20to\x20database','removeChild','HrRNW','Error\x20updating\x20item\x20in\x20blacklist','Could\x20not\x20remove\x20entry\x20from\x20database','6163297bknHFo','deleteRow','Error\x20updating\x20storage','type','disabled','rfuBp','DqrZw','createElement','VRnli','Wtsoa','3182544KrvhpQ','getElementById','personal','5024MnroaR','pMZqP','Error\x20loading\x20blacklist','blacklist','2266520XpWtUh','Error\x20updating\x20blacklist:','168kUTBkD','error','/api/updateblacklist','pkfEh','Error','qcoEm','application/json','Server\x20responded\x20with\x20status\x20','scope','length','forEach','Error\x20saving\x20blacklist\x20to\x20storage','set','Error\x20in\x20loadBlacklist:','dSLVO','button','ZqBzy','NvVWt','addEventListener','Error\x20retrieving\x20blacklist\x20data\x20from\x20storage','wZVaG','sXFAa','5156876DWFAID','remove','createTextNode','xOMMK','runtime','isArray','3HcPeiN','Storage\x20Error','tableBody','20lKtOCA','add','click','mLtZw'];a0_0x4c0a=function(){return _0x4a6bf7;};return a0_0x4c0a();}