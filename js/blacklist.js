(function(_0x5e4a7f,_0x2f2a25){const _0x48c857=a0_0x3987,_0x11b92f=_0x5e4a7f();while(!![]){try{const _0x291a44=parseInt(_0x48c857(0x1f4))/0x1*(-parseInt(_0x48c857(0x229))/0x2)+-parseInt(_0x48c857(0x213))/0x3+parseInt(_0x48c857(0x21c))/0x4+-parseInt(_0x48c857(0x228))/0x5+-parseInt(_0x48c857(0x1fd))/0x6*(-parseInt(_0x48c857(0x21f))/0x7)+parseInt(_0x48c857(0x22a))/0x8*(-parseInt(_0x48c857(0x219))/0x9)+parseInt(_0x48c857(0x1f7))/0xa;if(_0x291a44===_0x2f2a25)break;else _0x11b92f['push'](_0x11b92f['shift']());}catch(_0x1476ee){_0x11b92f['push'](_0x11b92f['shift']());}}}(a0_0x3b73,0xabbba));import a0_0x56abb9 from'./alerts.js';import{backendAddress}from'./main.js';function a0_0x3b73(){const _0x5a4c44=['LiLVI','ROQPz','SLLna','3190167ZJGaLf','Error\x20updating\x20storage','Error\x20updating\x20blacklist:','112616RRbEdx','json','WclTo','382207rnXiXG','deleteRow','iLSHv','Error\x20loading\x20blacklist','personal','RNVol','tYIpM','local','createTextNode','2506855iLWgYC','14wxXMRS','24CEnHrO','sysUp','Fesxp','tableBody','scope','set','GHOjA','zqxgO','eDITz','onDvB','HEylJ','createElement','gXKLk','Error\x20retrieving\x20blacklist\x20data\x20from\x20storage','ZevZe','frihm','Server\x20responded\x20with\x20status\x20','Error\x20saving\x20blacklist\x20to\x20storage','runtime','mJCRQ','values','POST','rows','value','RUKmF','mLYrX','length','fjqkd','36389vLwhJt','appendChild','error','27450330tqpJfs','ppjLr','FJXox','TDzkQ','isArray','Error','114Jpmrhb','Storage\x20Error','add','LjUeF','jJsXM','Error\x20updating\x20item\x20in\x20blacklist','Error\x20in\x20updateBlacklistInStorage:','blacklist','status','SEdCD','type','Error\x20in\x20loadBlacklist:','BSbeY','KfzmM','company','getElementById','lastError','manager','FLrSn','delete-table-row-button','zoHym','Eynmc','3863115MgvaiK','storage','bphaa'];a0_0x3b73=function(){return _0x5a4c44;};return a0_0x3b73();}import{getEmail,getCompanyName,getLoginKey,getAccountType}from'./state.js';export function populateBlacklistTable(_0x164f21){const _0x40e1c6=a0_0x3987,_0x4fdce1={'BSbeY':function(_0x2e1ecf,_0x4de457){return _0x2e1ecf===_0x4de457;},'mJCRQ':_0x40e1c6(0x223),'ppjLr':function(_0x140f2a,_0x35ddb2){return _0x140f2a!==_0x35ddb2;},'SEdCD':function(_0x5b37cc,_0x2b23fa){return _0x5b37cc!==_0x2b23fa;},'tYIpM':function(_0x2a841b,_0x337aa3,_0x43808e,_0x36b954){return _0x2a841b(_0x337aa3,_0x43808e,_0x36b954);},'bAKbg':'tableBody','LjUeF':function(_0x3cee13,_0x3ce100,_0x23cedd,_0x24b925){return _0x3cee13(_0x3ce100,_0x23cedd,_0x24b925);}},_0x409153=document[_0x40e1c6(0x20c)](_0x4fdce1['bAKbg']);while(_0x409153[_0x40e1c6(0x240)]['length']>0x1){_0x409153[_0x40e1c6(0x220)](0x1);}Array[_0x40e1c6(0x1fb)](_0x164f21)?(_0x164f21['sort']((_0x420ce8,_0x4985e7)=>{const _0x49c783=_0x40e1c6;if(_0x4fdce1[_0x49c783(0x209)](_0x420ce8[_0x49c783(0x22e)],_0x4fdce1[_0x49c783(0x23d)])&&_0x4fdce1[_0x49c783(0x1f8)](_0x4985e7[_0x49c783(0x22e)],_0x4fdce1['mJCRQ']))return-0x1;if(_0x4fdce1[_0x49c783(0x206)](_0x420ce8['scope'],_0x4fdce1[_0x49c783(0x23d)])&&_0x4985e7['scope']===_0x49c783(0x223))return 0x1;return 0x0;}),_0x164f21['forEach']((_0x386410,_0x56e8f8)=>{const _0x227204=_0x40e1c6;_0x4fdce1[_0x227204(0x225)](addRowToTable,_0x409153,_0x386410,_0x56e8f8);})):_0x4fdce1[_0x40e1c6(0x200)](addRowToTable,_0x409153,_0x164f21,0x0);}export function loadBlacklist(){const _0x2b2a3a=a0_0x3987,_0x388cca={'sysUp':_0x2b2a3a(0x1fe),'RNVol':function(_0x32728a,_0x51255a){return _0x32728a(_0x51255a);},'JZakn':function(_0x9088c6,_0x5605ea){return _0x9088c6!==_0x5605ea;},'frihm':_0x2b2a3a(0x20e),'jJsXM':'addBlacklistItemScopeInput','LiLVI':'blacklist','TDzkQ':_0x2b2a3a(0x1fc)},_0x24b759=getAccountType();_0x388cca['JZakn'](_0x24b759,_0x388cca[_0x2b2a3a(0x239)])&&(document[_0x2b2a3a(0x20c)](_0x388cca[_0x2b2a3a(0x201)])['disabled']=!![]);try{chrome[_0x2b2a3a(0x214)][_0x2b2a3a(0x226)]['get'](_0x388cca[_0x2b2a3a(0x216)],_0x344519=>{const _0x3874c6=_0x2b2a3a;if(chrome[_0x3874c6(0x23c)][_0x3874c6(0x20d)]){a0_0x56abb9[_0x3874c6(0x1f6)](_0x3874c6(0x237),_0x388cca[_0x3874c6(0x22b)]);return;}const _0x4af1ae=_0x344519[_0x3874c6(0x204)]||{},_0xe780b4=Object[_0x3874c6(0x23e)](_0x4af1ae);_0x388cca[_0x3874c6(0x224)](populateBlacklistTable,_0xe780b4);});}catch(_0xcd6bae){console['error'](_0x2b2a3a(0x208),_0xcd6bae),a0_0x56abb9[_0x2b2a3a(0x1f6)](_0x2b2a3a(0x222),_0x388cca[_0x2b2a3a(0x1fa)]);}}export async function removeBlacklistEntry(_0x2dd35e,_0x268fe4,_0x479c3e){const _0x444ec7=a0_0x3987,_0x16f5c0={'HEylJ':function(_0x416cb2,_0x51a0a3){return _0x416cb2===_0x51a0a3;},'itYJY':'Could\x20not\x20remove\x20entry\x20from\x20database','WGrak':_0x444ec7(0x1fc),'qkQwF':function(_0x34700d,_0x3c0fac){return _0x34700d(_0x3c0fac);}},_0x3e48be={'type':_0x2dd35e,'value':_0x268fe4,'scope':_0x479c3e},_0x3fd488=await updateBlacklistInDatabase(_0x3e48be,'remove');if(!_0x3fd488||_0x16f5c0[_0x444ec7(0x234)](_0x3fd488[_0x444ec7(0x1f2)],0x0))return a0_0x56abb9['error'](_0x16f5c0['itYJY'],_0x16f5c0['WGrak']),![];return _0x16f5c0['qkQwF'](updateBlacklistInStorage,_0x3fd488),!![];}function a0_0x3987(_0x46caca,_0x35850e){const _0x3b73de=a0_0x3b73();return a0_0x3987=function(_0x398781,_0x43cff2){_0x398781=_0x398781-0x1f0;let _0x11b57b=_0x3b73de[_0x398781];return _0x11b57b;},a0_0x3987(_0x46caca,_0x35850e);}export async function updateBlacklistInDatabase(_0x408813,_0x34a2be){const _0x4e1711=a0_0x3987,_0x1b20fd={'KfzmM':function(_0x5b2346){return _0x5b2346();},'Fesxp':function(_0x302d54,_0x1e2f22,_0x85f27b){return _0x302d54(_0x1e2f22,_0x85f27b);},'zqxgO':_0x4e1711(0x23f),'WclTo':'application/json','iLSHv':_0x4e1711(0x21b),'DlNyv':_0x4e1711(0x202),'ZevZe':'Error'};try{const _0x133534=_0x1b20fd[_0x4e1711(0x20a)](getEmail),_0x1bf90f=getCompanyName(),_0x1d1eb8=getLoginKey(),_0x480685=backendAddress+'/api/updateblacklist',_0x5ce7dc={'companyName':_0x1bf90f,'email':_0x133534,'loginKey':_0x1d1eb8,'type':_0x408813[_0x4e1711(0x207)],'value':_0x408813['value'],'scope':_0x408813[_0x4e1711(0x22e)],'action':_0x34a2be},_0x554a39=await _0x1b20fd[_0x4e1711(0x22c)](fetch,_0x480685,{'method':_0x1b20fd[_0x4e1711(0x231)],'headers':{'Content-Type':_0x1b20fd[_0x4e1711(0x21e)]},'body':JSON['stringify'](_0x5ce7dc)});if(!_0x554a39['ok']){const _0x26a86a=_0x4e1711(0x23a)+_0x554a39[_0x4e1711(0x205)];throw new Error(_0x26a86a);}const _0x2f6604=await _0x554a39[_0x4e1711(0x21d)]();return _0x2f6604[_0x4e1711(0x204)];}catch(_0x200ad9){return console['error'](_0x1b20fd[_0x4e1711(0x221)],_0x200ad9),a0_0x56abb9[_0x4e1711(0x1f6)](_0x1b20fd['DlNyv'],_0x1b20fd[_0x4e1711(0x238)]),[];}}export function updateBlacklistInStorage(_0xe512cb){const _0x88c1ca=a0_0x3987,_0x570798={'UXmcy':_0x88c1ca(0x23b),'RUKmF':_0x88c1ca(0x203),'XGNcD':_0x88c1ca(0x21a),'FLrSn':_0x88c1ca(0x1fe)};try{chrome['storage']['local'][_0x88c1ca(0x22f)]({'blacklist':_0xe512cb},function(){const _0x5892e8=_0x88c1ca;chrome[_0x5892e8(0x23c)][_0x5892e8(0x20d)]&&a0_0x56abb9[_0x5892e8(0x1f6)](_0x570798['UXmcy'],_0x5892e8(0x1fe));});}catch(_0x266bea){console[_0x88c1ca(0x1f6)](_0x570798[_0x88c1ca(0x1f0)],_0x266bea),a0_0x56abb9[_0x88c1ca(0x1f6)](_0x570798['XGNcD'],_0x570798[_0x88c1ca(0x20f)]);}}export function addRowToTable(_0x307fe7,_0x4cf104,_0x310c46){const _0x6feb04=a0_0x3987,_0x180534={'fjqkd':function(_0x4d149f,_0x237dd0,_0x3a0176,_0x217a62){return _0x4d149f(_0x237dd0,_0x3a0176,_0x217a62);},'bphaa':function(_0x1cf600,_0x3bc0e){return _0x1cf600+_0x3bc0e;},'onDvB':function(_0x5b422f){return _0x5b422f();},'gXKLk':function(_0x1631ca,_0x547ec){return _0x1631ca===_0x547ec;},'pEenr':function(_0x4c6f2e,_0x23334a){return _0x4c6f2e!==_0x23334a;},'ROQPz':'button','SLLna':_0x6feb04(0x210),'Eynmc':'click'},_0x30364f=_0x180534[_0x6feb04(0x215)](_0x310c46,0x1),_0x4c8da7=document[_0x6feb04(0x235)]('tr'),_0x278300={'numbering':_0x30364f,..._0x4cf104},_0x4c3a47=document[_0x6feb04(0x235)]('td');_0x4c3a47[_0x6feb04(0x1f5)](document[_0x6feb04(0x227)](_0x30364f)),_0x4c8da7[_0x6feb04(0x1f5)](_0x4c3a47);const _0x28fc6c=document['createElement']('td');_0x28fc6c[_0x6feb04(0x1f5)](document['createTextNode'](_0x278300[_0x6feb04(0x207)])),_0x4c8da7['appendChild'](_0x28fc6c);const _0x2a24c2=document['createElement']('td');_0x2a24c2['appendChild'](document[_0x6feb04(0x227)](_0x278300['value'])),_0x4c8da7[_0x6feb04(0x1f5)](_0x2a24c2);const _0x2ba071=document[_0x6feb04(0x235)]('td');_0x2ba071[_0x6feb04(0x1f5)](document[_0x6feb04(0x227)](_0x278300[_0x6feb04(0x22e)])),_0x4c8da7['appendChild'](_0x2ba071);const _0x3e553e=document[_0x6feb04(0x235)]('td'),_0x54bd2c=_0x180534[_0x6feb04(0x233)](getAccountType);if(_0x180534[_0x6feb04(0x236)](_0x54bd2c,'manager')||_0x180534['pEenr'](_0x278300[_0x6feb04(0x22e)],_0x6feb04(0x20b))){const _0x929ae6=document[_0x6feb04(0x235)](_0x180534[_0x6feb04(0x217)]);_0x929ae6['className']=_0x180534[_0x6feb04(0x218)],_0x929ae6['addEventListener'](_0x180534[_0x6feb04(0x212)],async function(){const _0x27c356=_0x6feb04,_0x555466=await _0x180534[_0x27c356(0x1f3)](removeBlacklistEntry,_0x278300['type'],_0x278300[_0x27c356(0x241)],_0x278300[_0x27c356(0x22e)]);_0x555466&&_0x307fe7['removeChild'](_0x4c8da7);}),_0x3e553e[_0x6feb04(0x1f5)](_0x929ae6);}_0x4c8da7[_0x6feb04(0x1f5)](_0x3e553e),_0x307fe7['appendChild'](_0x4c8da7);}export async function addBlacklistEntry(_0x3b4c3a,_0x409903,_0x3b731a){const _0x45a379=a0_0x3987,_0x1e047c={'GHOjA':_0x45a379(0x1ff),'eDITz':function(_0x55c43b,_0x21cd71){return _0x55c43b===_0x21cd71;},'FJXox':'Could\x20not\x20add\x20entry\x20to\x20database','zoHym':'Error','mLYrX':function(_0x451371,_0x3c52ea){return _0x451371(_0x3c52ea);},'aPCQd':_0x45a379(0x22d),'NcIKN':function(_0x80aaca,_0x33aaa7){return _0x80aaca-_0x33aaa7;}},_0x2740fa={'type':_0x3b4c3a,'value':_0x409903,'scope':_0x3b731a},_0x59b6e6=await updateBlacklistInDatabase(_0x2740fa,_0x1e047c[_0x45a379(0x230)]);if(!_0x59b6e6||_0x1e047c[_0x45a379(0x232)](_0x59b6e6['length'],0x0)){a0_0x56abb9[_0x45a379(0x1f6)](_0x1e047c[_0x45a379(0x1f9)],_0x1e047c[_0x45a379(0x211)]);return;}_0x1e047c[_0x45a379(0x1f1)](updateBlacklistInStorage,_0x59b6e6);const _0x3c76ef=document[_0x45a379(0x20c)](_0x1e047c['aPCQd']),_0x2604e8=_0x1e047c['NcIKN'](_0x3c76ef[_0x45a379(0x240)]['length'],0x1);addRowToTable(_0x3c76ef,_0x2740fa,_0x2604e8);}