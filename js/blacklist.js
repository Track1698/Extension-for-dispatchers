(function(_0x1b7bc4,_0x435b5d){const _0x429122=a0_0xdaf6,_0xc8985f=_0x1b7bc4();while(!![]){try{const _0x2a59ea=parseInt(_0x429122(0xb7))/0x1+-parseInt(_0x429122(0xad))/0x2+parseInt(_0x429122(0x95))/0x3+parseInt(_0x429122(0xa0))/0x4*(parseInt(_0x429122(0xaf))/0x5)+parseInt(_0x429122(0xe2))/0x6*(-parseInt(_0x429122(0xdf))/0x7)+parseInt(_0x429122(0xe1))/0x8+-parseInt(_0x429122(0x9f))/0x9*(parseInt(_0x429122(0x98))/0xa);if(_0x2a59ea===_0x435b5d)break;else _0xc8985f['push'](_0xc8985f['shift']());}catch(_0xef1bad){_0xc8985f['push'](_0xc8985f['shift']());}}}(a0_0x1965,0x8ebd1));import a0_0x11821a from'./alerts.js';import{backendAddress}from'./main.js';import{getEmail,getCompanyName,getLoginKey,getAccountType}from'./state.js';export function populateBlacklistTable(_0x28ee43){const _0x591a73=a0_0xdaf6,_0x253fa0={'kCfuC':_0x591a73(0xc5),'rdhwS':function(_0x34f2cc,_0x1ab2e4){return _0x34f2cc!==_0x1ab2e4;},'gdraq':function(_0x27bbee,_0x442920){return _0x27bbee===_0x442920;},'XtoGx':function(_0x50677e,_0x4dc397,_0x2fe528,_0x268bd9){return _0x50677e(_0x4dc397,_0x2fe528,_0x268bd9);},'FUilL':_0x591a73(0xc1)},_0x30ba4b=document[_0x591a73(0xab)](_0x253fa0[_0x591a73(0xac)]);while(_0x30ba4b[_0x591a73(0xbe)]['length']>0x1){_0x30ba4b[_0x591a73(0xbd)](0x1);}Array[_0x591a73(0xda)](_0x28ee43)?(_0x28ee43[_0x591a73(0xc3)]((_0x49935d,_0x192aa1)=>{const _0x3187bd=_0x591a73;if(_0x49935d[_0x3187bd(0xc2)]===_0x253fa0[_0x3187bd(0x99)]&&_0x253fa0[_0x3187bd(0xd7)](_0x192aa1[_0x3187bd(0xc2)],_0x253fa0[_0x3187bd(0x99)]))return-0x1;if(_0x49935d['scope']!==_0x253fa0[_0x3187bd(0x99)]&&_0x253fa0[_0x3187bd(0xa2)](_0x192aa1[_0x3187bd(0xc2)],_0x253fa0[_0x3187bd(0x99)]))return 0x1;return 0x0;}),_0x28ee43[_0x591a73(0xbb)]((_0x5037d9,_0x2689d6)=>{const _0x2a86ab=_0x591a73;_0x253fa0[_0x2a86ab(0x9c)](addRowToTable,_0x30ba4b,_0x5037d9,_0x2689d6);})):addRowToTable(_0x30ba4b,_0x28ee43,0x0);}export function loadBlacklist(){const _0x5d8b05=a0_0xdaf6,_0x400f81={'mlcpl':_0x5d8b05(0xa3),'ZtCzV':function(_0x5139be,_0x1fe79f){return _0x5139be(_0x1fe79f);},'ndUEG':function(_0x3af9f8){return _0x3af9f8();},'ZWEqm':function(_0x1748e6,_0xb1b819){return _0x1748e6!==_0xb1b819;},'yMcoU':'manager','evFPf':'addBlacklistItemScopeInput','opAZa':_0x5d8b05(0xb1),'zADGA':'Error\x20in\x20loadBlacklist:'},_0x232d27=_0x400f81[_0x5d8b05(0xce)](getAccountType);_0x400f81['ZWEqm'](_0x232d27,_0x400f81[_0x5d8b05(0xcc)])&&(document['getElementById'](_0x400f81[_0x5d8b05(0xa9)])['disabled']=!![]);try{chrome[_0x5d8b05(0xdd)][_0x5d8b05(0xa7)][_0x5d8b05(0xe0)](_0x400f81['opAZa'],_0x3f291f=>{const _0x422d28=_0x5d8b05;if(chrome[_0x422d28(0xd4)][_0x422d28(0xc4)]){a0_0x11821a['error'](_0x400f81['mlcpl'],'Storage\x20Error');return;}const _0x21341e=_0x3f291f[_0x422d28(0xb1)]||{},_0x3afed3=Object['values'](_0x21341e);_0x400f81[_0x422d28(0xd0)](populateBlacklistTable,_0x3afed3);});}catch(_0x5eeeca){console[_0x5d8b05(0xd5)](_0x400f81['zADGA'],_0x5eeeca),a0_0x11821a[_0x5d8b05(0xd5)](_0x5d8b05(0xb3),'Error');}}export async function removeBlacklistEntry(_0x54c3ac,_0x3e8e28,_0x36f1e2){const _0x423681=a0_0xdaf6,_0xe2e986={'vkMFf':function(_0x487b80,_0x4a8a55,_0x2d563e){return _0x487b80(_0x4a8a55,_0x2d563e);},'vPKjx':_0x423681(0xc9),'MyHug':_0x423681(0xa6),'idQEY':_0x423681(0xdb),'kXfns':function(_0x535cd9,_0x3ecf6d){return _0x535cd9(_0x3ecf6d);}},_0x3b2d92={'type':_0x54c3ac,'value':_0x3e8e28,'scope':_0x36f1e2},_0x16d581=await _0xe2e986[_0x423681(0xcb)](updateBlacklistInDatabase,_0x3b2d92,_0xe2e986[_0x423681(0xba)]);if(!_0x16d581||_0x16d581[_0x423681(0x9d)]===0x0)return a0_0x11821a[_0x423681(0xd5)](_0xe2e986[_0x423681(0xc0)],_0xe2e986['idQEY']),![];return _0xe2e986[_0x423681(0xd6)](updateBlacklistInStorage,_0x16d581),!![];}export async function updateBlacklistInDatabase(_0xa8b52d,_0x34d9ce){const _0x79d03=a0_0xdaf6,_0x152ff8={'NBaJq':function(_0x47b603){return _0x47b603();},'GxmHe':function(_0x4a8d44,_0x4e5216,_0x5cfda5){return _0x4a8d44(_0x4e5216,_0x5cfda5);},'rjvNM':'application/json','wEiOf':'Error\x20updating\x20blacklist:','ynijE':'Error\x20updating\x20item\x20in\x20blacklist'};try{const _0x380f42=_0x152ff8[_0x79d03(0xa4)](getEmail),_0x1edd0c=getCompanyName(),_0x145dc8=_0x152ff8[_0x79d03(0xa4)](getLoginKey),_0x491527=backendAddress+_0x79d03(0xa8),_0x2a4bd4={'companyName':_0x1edd0c,'email':_0x380f42,'loginKey':_0x145dc8,'type':_0xa8b52d[_0x79d03(0xb8)],'value':_0xa8b52d['value'],'scope':_0xa8b52d[_0x79d03(0xc2)],'action':_0x34d9ce},_0x2144a1=await _0x152ff8[_0x79d03(0xde)](fetch,_0x491527,{'method':_0x79d03(0xca),'headers':{'Content-Type':_0x152ff8['rjvNM']},'body':JSON[_0x79d03(0xd8)](_0x2a4bd4)});if(!_0x2144a1['ok']){const _0x48a3e9='Server\x20responded\x20with\x20status\x20'+_0x2144a1[_0x79d03(0xd1)];throw new Error(_0x48a3e9);}const _0x1becd8=await _0x2144a1[_0x79d03(0xa1)]();return _0x1becd8[_0x79d03(0xb1)];}catch(_0xfb3ff3){return console[_0x79d03(0xd5)](_0x152ff8[_0x79d03(0xb0)],_0xfb3ff3),a0_0x11821a[_0x79d03(0xd5)](_0x152ff8['ynijE'],_0x79d03(0xdb)),[];}}export function updateBlacklistInStorage(_0xa1b41d){const _0x275ee5=a0_0xdaf6,_0x1e7d90={'WRWrO':'Error\x20saving\x20blacklist\x20to\x20storage','NBHdH':'Storage\x20Error','SnmHZ':'Error\x20in\x20updateBlacklistInStorage:','IMvoF':_0x275ee5(0xd2)};try{chrome['storage']['local'][_0x275ee5(0xbc)]({'blacklist':_0xa1b41d},function(){const _0x234485=_0x275ee5;chrome['runtime']['lastError']&&a0_0x11821a[_0x234485(0xd5)](_0x1e7d90[_0x234485(0xb5)],_0x1e7d90[_0x234485(0xd9)]);});}catch(_0x52fbc2){console[_0x275ee5(0xd5)](_0x1e7d90[_0x275ee5(0x9e)],_0x52fbc2),a0_0x11821a['error'](_0x1e7d90[_0x275ee5(0xb9)],_0x1e7d90[_0x275ee5(0xd9)]);}}function a0_0x1965(){const _0x36c3bb=['company','delete-table-row-button','createTextNode','remove','POST','vkMFf','yMcoU','GSzdo','ndUEG','removeChild','ZtCzV','status','Error\x20updating\x20storage','button','runtime','error','kXfns','rdhwS','stringify','NBHdH','isArray','Error','RKbrx','storage','GxmHe','3698359XSGJur','get','758080kNdfif','12jYesiw','2790708rOmaSG','eAvnj','appendChild','20hXjnbu','kCfuC','wHzBr','cfDzp','XtoGx','length','SnmHZ','673128Jeqwze','232dugnsd','json','gdraq','Error\x20retrieving\x20blacklist\x20data\x20from\x20storage','NBaJq','EZZAO','Could\x20not\x20remove\x20entry\x20from\x20database','local','/api/updateblacklist','evFPf','value','getElementById','FUilL','1216814uviDnE','MNiei','29180tSGKcy','wEiOf','blacklist','createElement','Error\x20loading\x20blacklist','tCeCX','WRWrO','addEventListener','1035838uCuEqe','type','IMvoF','vPKjx','forEach','set','deleteRow','rows','click','MyHug','tableBody','scope','sort','lastError','personal'];a0_0x1965=function(){return _0x36c3bb;};return a0_0x1965();}export function addRowToTable(_0x3d5bf5,_0x3fdc1b,_0x301c3e){const _0x285d18=a0_0xdaf6,_0x1640e9={'VfUSG':function(_0x96e762,_0x652ab2,_0x2eaaea,_0x30e0ee){return _0x96e762(_0x652ab2,_0x2eaaea,_0x30e0ee);},'GSzdo':function(_0x4b24b3,_0x410b60){return _0x4b24b3+_0x410b60;},'VliVd':function(_0x5d6df6){return _0x5d6df6();},'tCeCX':function(_0x38bb43,_0x58a902){return _0x38bb43===_0x58a902;},'eAvnj':'manager','belEe':function(_0x2a075d,_0x4847ff){return _0x2a075d!==_0x4847ff;},'cfDzp':_0x285d18(0xd3),'MNiei':_0x285d18(0xbf)},_0x33f4ee=_0x1640e9[_0x285d18(0xcd)](_0x301c3e,0x1),_0x2e2d06=document[_0x285d18(0xb2)]('tr'),_0x2eec75={'numbering':_0x33f4ee,..._0x3fdc1b},_0x31d794=document[_0x285d18(0xb2)]('td');_0x31d794[_0x285d18(0x97)](document[_0x285d18(0xc8)](_0x33f4ee)),_0x2e2d06[_0x285d18(0x97)](_0x31d794);const _0x334fb3=document['createElement']('td');_0x334fb3[_0x285d18(0x97)](document[_0x285d18(0xc8)](_0x2eec75['type'])),_0x2e2d06[_0x285d18(0x97)](_0x334fb3);const _0x1805a5=document[_0x285d18(0xb2)]('td');_0x1805a5[_0x285d18(0x97)](document['createTextNode'](_0x2eec75[_0x285d18(0xaa)])),_0x2e2d06['appendChild'](_0x1805a5);const _0x1a3c9b=document[_0x285d18(0xb2)]('td');_0x1a3c9b[_0x285d18(0x97)](document[_0x285d18(0xc8)](_0x2eec75['scope'])),_0x2e2d06[_0x285d18(0x97)](_0x1a3c9b);const _0x29f5b6=document[_0x285d18(0xb2)]('td'),_0x3e3c69=_0x1640e9['VliVd'](getAccountType);if(_0x1640e9[_0x285d18(0xb4)](_0x3e3c69,_0x1640e9[_0x285d18(0x96)])||_0x1640e9['belEe'](_0x2eec75[_0x285d18(0xc2)],_0x285d18(0xc6))){const _0x5ac14c=document['createElement'](_0x1640e9[_0x285d18(0x9b)]);_0x5ac14c['className']=_0x285d18(0xc7),_0x5ac14c[_0x285d18(0xb6)](_0x1640e9[_0x285d18(0xae)],async function(){const _0x16933a=_0x285d18,_0x4d502c=await _0x1640e9['VfUSG'](removeBlacklistEntry,_0x2eec75[_0x16933a(0xb8)],_0x2eec75[_0x16933a(0xaa)],_0x2eec75[_0x16933a(0xc2)]);_0x4d502c&&_0x3d5bf5[_0x16933a(0xcf)](_0x2e2d06);}),_0x29f5b6['appendChild'](_0x5ac14c);}_0x2e2d06[_0x285d18(0x97)](_0x29f5b6),_0x3d5bf5[_0x285d18(0x97)](_0x2e2d06);}function a0_0xdaf6(_0x383a41,_0x29f512){const _0x19654c=a0_0x1965();return a0_0xdaf6=function(_0xdaf669,_0x4a8c74){_0xdaf669=_0xdaf669-0x95;let _0x54920a=_0x19654c[_0xdaf669];return _0x54920a;},a0_0xdaf6(_0x383a41,_0x29f512);}export async function addBlacklistEntry(_0x22038c,_0x11df19,_0xad616a){const _0x3a7d3c=a0_0xdaf6,_0x34781b={'CLGmF':function(_0x1c5339,_0x39734c,_0x4599a6){return _0x1c5339(_0x39734c,_0x4599a6);},'EZZAO':'add','wHzBr':'Could\x20not\x20add\x20entry\x20to\x20database','DHRnq':function(_0x49d8d6,_0xe44d6b){return _0x49d8d6(_0xe44d6b);},'RKbrx':_0x3a7d3c(0xc1),'TSMFo':function(_0x1858b3,_0x1b665a,_0x5d827a,_0x8beb2c){return _0x1858b3(_0x1b665a,_0x5d827a,_0x8beb2c);}},_0x344316={'type':_0x22038c,'value':_0x11df19,'scope':_0xad616a},_0x25da42=await _0x34781b['CLGmF'](updateBlacklistInDatabase,_0x344316,_0x34781b[_0x3a7d3c(0xa5)]);if(!_0x25da42||_0x25da42['length']===0x0){a0_0x11821a[_0x3a7d3c(0xd5)](_0x34781b[_0x3a7d3c(0x9a)],_0x3a7d3c(0xdb));return;}_0x34781b['DHRnq'](updateBlacklistInStorage,_0x25da42);const _0x58e18e=document['getElementById'](_0x34781b[_0x3a7d3c(0xdc)]),_0x111465=_0x58e18e['rows'][_0x3a7d3c(0x9d)]-0x1;_0x34781b['TSMFo'](addRowToTable,_0x58e18e,_0x344316,_0x111465);}