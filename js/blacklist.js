(function(_0x54e433,_0xfbbb26){const _0x1e4a6c=a0_0x3442,_0x455b04=_0x54e433();while(!![]){try{const _0x1b0245=parseInt(_0x1e4a6c(0xb2))/0x1+-parseInt(_0x1e4a6c(0xc1))/0x2+parseInt(_0x1e4a6c(0x9a))/0x3*(parseInt(_0x1e4a6c(0xbc))/0x4)+parseInt(_0x1e4a6c(0xda))/0x5+parseInt(_0x1e4a6c(0xdb))/0x6+parseInt(_0x1e4a6c(0xa8))/0x7*(parseInt(_0x1e4a6c(0x9b))/0x8)+-parseInt(_0x1e4a6c(0xe3))/0x9*(parseInt(_0x1e4a6c(0xc8))/0xa);if(_0x1b0245===_0xfbbb26)break;else _0x455b04['push'](_0x455b04['shift']());}catch(_0x1a8a2b){_0x455b04['push'](_0x455b04['shift']());}}}(a0_0x446b,0x779c9));import a0_0x3995ee from'./alerts.js';function a0_0x446b(){const _0xc7ecc0=['YEwMU','createElement','Error\x20in\x20loadBlacklist:','json','POST','KSNYR','1373350RQCBrF','5114046rLrWcq','AeLUw','nVVIl','removeChild','FGrpm','jPsIV','RbhZN','aPwot','10017234dLeMET','sTavO','BkwGK','Could\x20not\x20remove\x20entry\x20from\x20database','gMzGB','SgSfX','addBlacklistItemScopeInput','lastError','XfsTU','OHFyk','Error\x20retrieving\x20blacklist\x20data\x20from\x20storage','runtime','JNIvO','207suhKbx','1560816SUVqAj','stringify','delete-table-row-button','rows','manager','mHomV','personal','Uxbut','Error','local','/api/updateblacklist','isArray','get','35XkreQU','getElementById','company','tableBody','button','scope','Error\x20in\x20updateBlacklistInStorage:','Pqerv','vkFTh','eZxrb','362592hoeydT','DIfSL','mIghh','GSfek','values','className','eKhZJ','KPqJU','YZWMG','forEach','39428JYOUiW','appendChild','addEventListener','click','type','858530jhUcnM','unEjN','Error\x20saving\x20blacklist\x20to\x20storage','set','ZDcNb','XoKwj','disabled','20RgcdRu','storage','iKBHD','SbQNz','Storage\x20Error','Error\x20updating\x20storage','add','createTextNode','KIlCw','error','length','LemeL'];a0_0x446b=function(){return _0xc7ecc0;};return a0_0x446b();}import{backendAddress}from'./main.js';import{getEmail,getCompanyName,getLoginKey,getAccountType}from'./state.js';export function populateBlacklistTable(_0x2a1be1){const _0x437d92=a0_0x3442,_0x7ec808={'AeLUw':function(_0x5372a1,_0x3db3b4){return _0x5372a1!==_0x3db3b4;},'SgSfX':_0x437d92(0xa1),'pffJq':function(_0x3eb2ba,_0x27f366){return _0x3eb2ba===_0x27f366;},'nVVIl':function(_0x1b1d1d,_0x2d7a9a,_0x392c7c,_0x58d197){return _0x1b1d1d(_0x2d7a9a,_0x392c7c,_0x58d197);},'TEswF':_0x437d92(0xab),'DIfSL':function(_0x5c5488,_0x1e2b0b,_0x219208,_0x4969cb){return _0x5c5488(_0x1e2b0b,_0x219208,_0x4969cb);}},_0x5b22c3=document[_0x437d92(0xa9)](_0x7ec808['TEswF']);while(_0x5b22c3[_0x437d92(0x9e)]['length']>0x1){_0x5b22c3['deleteRow'](0x1);}Array[_0x437d92(0xa6)](_0x2a1be1)?(_0x2a1be1['sort']((_0xfc19e8,_0x19ec21)=>{const _0x12a5aa=_0x437d92;if(_0xfc19e8[_0x12a5aa(0xad)]===_0x12a5aa(0xa1)&&_0x7ec808[_0x12a5aa(0xdc)](_0x19ec21['scope'],_0x12a5aa(0xa1)))return-0x1;if(_0x7ec808[_0x12a5aa(0xdc)](_0xfc19e8[_0x12a5aa(0xad)],_0x7ec808[_0x12a5aa(0x92)])&&_0x7ec808['pffJq'](_0x19ec21[_0x12a5aa(0xad)],_0x7ec808[_0x12a5aa(0x92)]))return 0x1;return 0x0;}),_0x2a1be1[_0x437d92(0xbb)]((_0x390ab8,_0x18d0b4)=>{const _0xbc7c1b=_0x437d92;_0x7ec808[_0xbc7c1b(0xdd)](addRowToTable,_0x5b22c3,_0x390ab8,_0x18d0b4);})):_0x7ec808[_0x437d92(0xb3)](addRowToTable,_0x5b22c3,_0x2a1be1,0x0);}export function loadBlacklist(){const _0x120dc8=a0_0x3442,_0x7b56b2={'DllDP':_0x120dc8(0x97),'vkFTh':function(_0x3acabb,_0xd91d43){return _0x3acabb(_0xd91d43);},'JNIvO':function(_0x3b9a37,_0xcd1e87){return _0x3b9a37!==_0xcd1e87;},'eZxrb':_0x120dc8(0x9f),'ZDcNb':_0x120dc8(0x93),'LInHa':'Error\x20loading\x20blacklist','aPwot':_0x120dc8(0xa3)},_0x595a0e=getAccountType();_0x7b56b2[_0x120dc8(0x99)](_0x595a0e,_0x7b56b2[_0x120dc8(0xb1)])&&(document[_0x120dc8(0xa9)](_0x7b56b2[_0x120dc8(0xc5)])[_0x120dc8(0xc7)]=!![]);try{chrome['storage'][_0x120dc8(0xa4)][_0x120dc8(0xa7)]('blacklist',_0x49559a=>{const _0x4bcc93=_0x120dc8;if(chrome['runtime'][_0x4bcc93(0x94)]){a0_0x3995ee['error'](_0x7b56b2['DllDP'],'Storage\x20Error');return;}const _0xeba941=_0x49559a['blacklist']||{},_0x19eaf7=Object[_0x4bcc93(0xb6)](_0xeba941);_0x7b56b2[_0x4bcc93(0xb0)](populateBlacklistTable,_0x19eaf7);});}catch(_0x2b6a0e){console[_0x120dc8(0xd1)](_0x120dc8(0xd6),_0x2b6a0e),a0_0x3995ee[_0x120dc8(0xd1)](_0x7b56b2['LInHa'],_0x7b56b2[_0x120dc8(0xe2)]);}}export async function removeBlacklistEntry(_0x597230,_0x3ce6d9,_0x14dfb6){const _0x5dd8ce=a0_0x3442,_0x501b68={'Pqerv':function(_0x18d2f9,_0x400f4d,_0x9bf594){return _0x18d2f9(_0x400f4d,_0x9bf594);},'Uxbut':function(_0x482303,_0x1c3f73){return _0x482303===_0x1c3f73;},'FGrpm':_0x5dd8ce(0xe6),'GSfek':_0x5dd8ce(0xa3),'LemeL':function(_0x4053c9,_0x20340f){return _0x4053c9(_0x20340f);}},_0x562f9c={'type':_0x597230,'value':_0x3ce6d9,'scope':_0x14dfb6},_0x1a313f=await _0x501b68[_0x5dd8ce(0xaf)](updateBlacklistInDatabase,_0x562f9c,'remove');if(!_0x1a313f||_0x501b68[_0x5dd8ce(0xa2)](_0x1a313f['length'],0x0))return a0_0x3995ee[_0x5dd8ce(0xd1)](_0x501b68[_0x5dd8ce(0xdf)],_0x501b68[_0x5dd8ce(0xb5)]),![];return _0x501b68[_0x5dd8ce(0xd3)](updateBlacklistInStorage,_0x1a313f),!![];}export async function updateBlacklistInDatabase(_0x4e4b1d,_0x20873d){const _0x109830=a0_0x3442,_0x4f2bdf={'RbhZN':function(_0x454553){return _0x454553();},'YZWMG':function(_0x398d2d){return _0x398d2d();},'eKhZJ':function(_0xc336df,_0xfc615,_0x358975){return _0xc336df(_0xfc615,_0x358975);},'XfsTU':'application/json','OHFyk':'Error\x20updating\x20blacklist:'};try{const _0x3413f1=_0x4f2bdf[_0x109830(0xe1)](getEmail),_0x412254=_0x4f2bdf[_0x109830(0xba)](getCompanyName),_0x4a1d56=_0x4f2bdf['YZWMG'](getLoginKey),_0x74de28=backendAddress+_0x109830(0xa5),_0x52ec37={'companyName':_0x412254,'email':_0x3413f1,'loginKey':_0x4a1d56,'type':_0x4e4b1d['type'],'value':_0x4e4b1d['value'],'scope':_0x4e4b1d[_0x109830(0xad)],'action':_0x20873d},_0x54f3ee=await _0x4f2bdf[_0x109830(0xb8)](fetch,_0x74de28,{'method':_0x109830(0xd8),'headers':{'Content-Type':_0x4f2bdf[_0x109830(0x95)]},'body':JSON[_0x109830(0x9c)](_0x52ec37)});if(!_0x54f3ee['ok']){const _0x1e1425='Server\x20responded\x20with\x20status\x20'+_0x54f3ee['status'];throw new Error(_0x1e1425);}const _0x3c101f=await _0x54f3ee[_0x109830(0xd7)]();return _0x3c101f['blacklist'];}catch(_0x1a547f){return console[_0x109830(0xd1)](_0x4f2bdf[_0x109830(0x96)],_0x1a547f),a0_0x3995ee[_0x109830(0xd1)]('Error\x20updating\x20item\x20in\x20blacklist',_0x109830(0xa3)),[];}}export function updateBlacklistInStorage(_0x4448ae){const _0x3b04c0=a0_0x3442,_0x564bb4={'SDJzZ':_0x3b04c0(0xc3),'CmGSs':_0x3b04c0(0xae),'gMzGB':_0x3b04c0(0xcd),'unEjN':_0x3b04c0(0xcc)};try{chrome[_0x3b04c0(0xc9)][_0x3b04c0(0xa4)][_0x3b04c0(0xc4)]({'blacklist':_0x4448ae},function(){const _0x35463c=_0x3b04c0;chrome[_0x35463c(0x98)][_0x35463c(0x94)]&&a0_0x3995ee[_0x35463c(0xd1)](_0x564bb4['SDJzZ'],_0x35463c(0xcc));});}catch(_0x3d2190){console[_0x3b04c0(0xd1)](_0x564bb4['CmGSs'],_0x3d2190),a0_0x3995ee[_0x3b04c0(0xd1)](_0x564bb4[_0x3b04c0(0x91)],_0x564bb4[_0x3b04c0(0xc2)]);}}export function addRowToTable(_0xbd9e4c,_0x2ef713,_0x261973){const _0x57da52=a0_0x3442,_0x311468={'nMNEt':function(_0x2b8c40,_0x57b86c,_0x306eef,_0x339afa){return _0x2b8c40(_0x57b86c,_0x306eef,_0x339afa);},'KIlCw':function(_0x193dc6,_0xa526cb){return _0x193dc6+_0xa526cb;},'mHomV':function(_0x36bffe,_0x57fdcf){return _0x36bffe===_0x57fdcf;},'KSNYR':'manager','jPsIV':_0x57da52(0xaa),'XoKwj':_0x57da52(0xac),'rqIfA':_0x57da52(0x9d)},_0x16c942=_0x311468[_0x57da52(0xd0)](_0x261973,0x1),_0xfa4c79=document[_0x57da52(0xd5)]('tr'),_0x12a461={'numbering':_0x16c942,..._0x2ef713},_0x29694e=document['createElement']('td');_0x29694e[_0x57da52(0xbd)](document[_0x57da52(0xcf)](_0x16c942)),_0xfa4c79[_0x57da52(0xbd)](_0x29694e);const _0x3f282c=document[_0x57da52(0xd5)]('td');_0x3f282c[_0x57da52(0xbd)](document[_0x57da52(0xcf)](_0x12a461[_0x57da52(0xc0)])),_0xfa4c79[_0x57da52(0xbd)](_0x3f282c);const _0x41668a=document[_0x57da52(0xd5)]('td');_0x41668a['appendChild'](document[_0x57da52(0xcf)](_0x12a461['value'])),_0xfa4c79['appendChild'](_0x41668a);const _0x5ec773=document[_0x57da52(0xd5)]('td');_0x5ec773['appendChild'](document[_0x57da52(0xcf)](_0x12a461[_0x57da52(0xad)])),_0xfa4c79[_0x57da52(0xbd)](_0x5ec773);const _0x4d7ffa=document[_0x57da52(0xd5)]('td'),_0x5db1f6=getAccountType();if(_0x311468[_0x57da52(0xa0)](_0x5db1f6,_0x311468[_0x57da52(0xd9)])||_0x12a461['scope']!==_0x311468[_0x57da52(0xe0)]){const _0xdf8d9e=document[_0x57da52(0xd5)](_0x311468[_0x57da52(0xc6)]);_0xdf8d9e[_0x57da52(0xb7)]=_0x311468['rqIfA'],_0xdf8d9e[_0x57da52(0xbe)](_0x57da52(0xbf),async function(){const _0x44b150=_0x57da52,_0x15fa46=await _0x311468['nMNEt'](removeBlacklistEntry,_0x12a461['type'],_0x12a461['value'],_0x12a461['scope']);_0x15fa46&&_0xbd9e4c[_0x44b150(0xde)](_0xfa4c79);}),_0x4d7ffa['appendChild'](_0xdf8d9e);}_0xfa4c79[_0x57da52(0xbd)](_0x4d7ffa),_0xbd9e4c[_0x57da52(0xbd)](_0xfa4c79);}function a0_0x3442(_0x1f930d,_0x39586f){const _0x446bed=a0_0x446b();return a0_0x3442=function(_0x3442ee,_0xf73cd1){_0x3442ee=_0x3442ee-0x91;let _0x55903a=_0x446bed[_0x3442ee];return _0x55903a;},a0_0x3442(_0x1f930d,_0x39586f);}export async function addBlacklistEntry(_0x386c85,_0x5764af,_0x1e1b76){const _0x6491db=a0_0x3442,_0x4809c9={'iKBHD':function(_0x3c85fc,_0x4f8806,_0x2f2de1){return _0x3c85fc(_0x4f8806,_0x2f2de1);},'SbQNz':function(_0x2b03b0,_0x1b93fe){return _0x2b03b0===_0x1b93fe;},'YEwMU':'Could\x20not\x20add\x20entry\x20to\x20database','sTavO':_0x6491db(0xa3),'BkwGK':function(_0x57da9a,_0x1062c0){return _0x57da9a(_0x1062c0);},'mIghh':_0x6491db(0xab),'KPqJU':function(_0x4f4cbc,_0x776e88,_0x4559a1,_0x5b727f){return _0x4f4cbc(_0x776e88,_0x4559a1,_0x5b727f);}},_0x315e7f={'type':_0x386c85,'value':_0x5764af,'scope':_0x1e1b76},_0xea076b=await _0x4809c9[_0x6491db(0xca)](updateBlacklistInDatabase,_0x315e7f,_0x6491db(0xce));if(!_0xea076b||_0x4809c9[_0x6491db(0xcb)](_0xea076b[_0x6491db(0xd2)],0x0)){a0_0x3995ee[_0x6491db(0xd1)](_0x4809c9[_0x6491db(0xd4)],_0x4809c9[_0x6491db(0xe4)]);return;}_0x4809c9[_0x6491db(0xe5)](updateBlacklistInStorage,_0xea076b);const _0x4b5ba5=document[_0x6491db(0xa9)](_0x4809c9[_0x6491db(0xb4)]),_0x539eeb=_0x4b5ba5['rows'][_0x6491db(0xd2)]-0x1;_0x4809c9[_0x6491db(0xb9)](addRowToTable,_0x4b5ba5,_0x315e7f,_0x539eeb);}